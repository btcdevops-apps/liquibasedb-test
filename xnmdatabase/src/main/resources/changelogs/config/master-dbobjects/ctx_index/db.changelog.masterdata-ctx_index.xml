<?xml version="1.1" encoding="UTF-8" standalone="no"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog" xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog-ext http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.5.xsd">
    <changeSet author="oladayo.salawu@btcserv.co.uk" id="master-data-01-ctxindex" runOnChange="true">
        <!--<tagDatabase tag="mtbl_constr_01"/>-->
        <!--<sql>call xnm_drop_index('btc_address_search_index')</sql>
        <sql>call xnm_drop_preference('address_datastore')</sql>
        <sql>call xnm_drop_preference('address_wordlist')</sql>
        <sql>call xnm_drop_preference('address_lexer')</sql>
        <sql>call xnm_drop_stoplist('address_stoplist')</sql>-->
        <sqlFile path="changelogs/sql/master-dbobjects/ctx_index/master-data-01-drop-preferences.sql" splitStatements="false" endDelimiter=''/>

        <sql>call ctx_ddl.create_preference('address_datastore', 'user_datastore')</sql>
        <sql>call ctx_ddl.set_attribute('address_datastore', 'procedure', 'btc_global_address_search.create_address_search_item')</sql>
        <sql>call ctx_ddl.set_attribute('address_datastore', 'output_type', 'varchar2')</sql>
        <sql>call ctx_ddl.create_preference('address_wordlist', 'basic_wordlist')</sql>
        <sql>call ctx_ddl.set_attribute('address_wordlist', 'prefix_index', 'true')</sql>
        <sql>call ctx_ddl.create_preference('address_lexer', 'basic_lexer')</sql>
        <sql>call ctx_ddl.set_attribute('address_lexer', 'skipjoins', '.-''')</sql>
        <sql>call ctx_ddl.set_attribute('address_lexer', 'mixed_case', 'yes')</sql>
        <sql>call ctx_ddl.set_attribute('address_lexer', 'base_letter', 'true')</sql>
        <sql>call ctx_ddl.create_stoplist('address_stoplist')</sql>
        <sql>call ctx_ddl.add_stopword('address_stoplist', 'te')</sql>
        <sql>call ctx_ddl.add_stopword('address_stoplist', 'vs')</sql>
        <sqlFile path="changelogs/sql/master-dbobjects/ctx_index/master-data-01-ctx_index.sql" splitStatements="false" endDelimiter=''/>
        <rollback>
            <sql>call xnm_drop_index('btc_address_search_index')</sql>
            <sql>call xnm_drop_preference('address_datastore')</sql>
            <sql>call xnm_drop_preference('address_wordlist')</sql>
            <sql>call xnm_drop_preference('address_lexer')</sql>
            <sql>call xnm_drop_stoplist('address_stoplist')</sql>
<!--            <sqlFile path="changelogs/sql/master-dbobjects/ctx_index/rollback/master-data-01-ctx_index-rb.sql"/>-->
        </rollback>
    </changeSet>
</databaseChangeLog>